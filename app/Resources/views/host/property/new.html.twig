{% extends 'host/base.html.twig' %}
{% block table %}
    <div class="container">
        <div class="stepwizard col-md-offset-3">
            <div class="stepwizard-row setup-panel">
                <div class="stepwizard-step">
                    <a id="anchor-step-1" href="#step-1" type="button" class="btn btn-primary btn-circle" disabled="disabled">1</a>
                    <p>{% trans %}label.property{% endtrans %}</p>
                </div>
                <div class="stepwizard-step">
                    <a id="anchor-step-2" href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                    <p>{% trans %}label.informations{% endtrans %}</p>
                </div>
                <div class="stepwizard-step">
                    <a id="anchor-step-3" href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a>
                    <p>{% trans %}label.address{% endtrans %}</p>
                </div>
                <div class="stepwizard-step">
                    <a id="anchor-step-4" href="#step-4" type="button" class="btn btn-default btn-circle" disabled="disabled">4</a>
                    <p>{% trans %}label.pictures{% endtrans %}</p>
                </div>
            </div>
        </div>
            <div class="row setup-content" id="step-1">
                <div class="col-xs-6 col-md-offset-3">
                    <div class="col-md-12">
                        <form name="property" id="property" method="post" action="{{ path('property_submit') }}">
                            <div class="form-group">
                                <label>*{% trans %}label.property_category{% endtrans %} </label>
                                {{ form_widget(propertyForm.propertyCategory,  { 'attr': {'class': 'form-control'} }) }}
                            </div>
                            <div class="form-group">
                                <label>*{% trans %}label.name{% endtrans %} </label>
                                {{ form_widget(propertyForm.name,  { 'attr': {'class': 'form-control'} }) }}
                            </div>
                            <p style="font-style: italic"> {% trans %}label.property_name_exemple{% endtrans %}</p>
                            <div class="form-group">
                                <label>{% trans %}label.description{% endtrans %} </label>
                                {{ form_widget(propertyForm.description,  { 'attr': {'class': 'form-control'} }) }}
                            </div>
                            <button class="btn btn-primary btn-lg pull-right" type="submit" onclick="recordProperty()">{% trans %}label.submit{% endtrans %}</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row setup-content" id="step-2">
                <div class="col-xs-6 col-md-offset-3">
                    <div class="col-md-12">
                        <form name="characteristicValue" action="{{ path('characteristic_property_value_submit') }}" method="post">
                            <input type="hidden" name="characteristicValueForm[property]" value="{{ app.request.get('id') }}">
                            {% include('host/characteristic/valueForm.html.twig') %}
                            <button class="btn btn-primary btn-lg pull-right" type="submit" >{% trans %}label.submit{% endtrans %}</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row setup-content" id="step-3">
                <div class="col-xs-6 col-md-offset-3">
                    <div class="col-md-12">
                        <orm name="propertyAddress" id="propertyAddress">
                            <div class="form-group">
                                <label>{% trans %}label.address{% endtrans %} </label>
                                {{ form_widget(propertyForm.address,  { 'attr': {'class': 'form-control'} }) }}
                                <div id="buttonNextAddress">
                                    <a class="btn btn-primary btn-lg pull-right" href="#step-4" onclick="window.location.reload(true);">{% trans %}label.next{% endtrans %}</a>
                                </div>
                            </div>
                        <form name="address" method="post" action="{{ path('property_address_submit') }}">
                        <div id="addressDiv" style="display: none">
                            <form>
                                <input type="hidden" value="{{ app.request.get('id') }}" name="address[property]">
                                <div class="form-group">
                                    {{ form_widget(addressForm.id,  { 'attr': {'required': 'false'} }) }}
                                </div>
                                <div class="form-group">
                                    <label for="address">*{% trans %}label.address{% endtrans %} </label>
                                    {{ form_widget(addressForm.formattedAddress,  { 'attr': {'class': 'form-control'} }) }}
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="postal_code">*{% trans %}label.postal_code{% endtrans %} </label>
                                            {{ form_widget(addressForm.postalCode,  { 'attr': {'class': 'form-control'} }) }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="locality">*{% trans %}label.locality{% endtrans %} </label>
                                            {{ form_widget(addressForm.locality,  { 'attr': {'class': 'form-control'} }) }}
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="country">*{% trans %}label.country{% endtrans %} </label>
                                    {{ form_widget(addressForm.country,  { 'attr': {'class': 'form-control'} }) }}
                                </div>
                                <button class="btn btn-primary btn-lg pull-right" type="submit" >{% trans %}label.submit{% endtrans %}</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row setup-content" id="step-4">
                <div class="col-xs-6 col-md-offset-3">
                    <div class="col-md-12">
                        <br>
                        <p style="font-style: italic"> {% trans %}label.property_pictures_explication{% endtrans %}</p>
                        <br>
                        <form name="picture" action="{{ path('property_pictures_submit') }}">
                            <input name="picture[]" type="file" multiple="true" class="form-control">
                            <input type="submit" class="btn btn-success btn-lg pull-right" value="{% trans %}label.submit{% endtrans %}" >
                        </form>
                    </div>
                </div>
            </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            url = document.location.toString();
            id = {{  app.request.get('id') }};
            step = url.split('#')[1];
            if((step == 'strep-2' || step == 'step-3' || step == 'step-4') && id == '' ) {
                step = 'step-1';
            }
            document.getElementById("anchor-" + step).removeAttribute("disabled");
            $("#anchor-" + step)[0].click();
        });


//        $(':checkbox').change(function() {
//            if(this.checked) {
//                $(this).val(1);
//            } else {
//                $(this).val(0);
//            }
//        });
    $('#property_address').on('change', function() {
        if($(this).val() == '') {
            $('#addressDiv').show();
            $('#buttonNextAddress').hide();
        } else {
            $('#addressDiv').hide();
            $('#buttonNextAddress').show();
        }
    });
    </script>
{% endblock %}